<app-spinner></app-spinner>

<div class="single-page-area">

        <div class="title-area">
            <a (click)="window.history.back()" class="btn back-page-btn"><i class="ri-arrow-left-s-line"></i></a>
            <h3>Tickets</h3>
            <div translate="no" *ngIf="storeData.store['wallet'] as walletData" class="balance">
              {{walletData['init_currency']['symbol']}}{{currencyConverter(walletData['balance']['new'])|number:'1.1-1'}}
              <!-- <span><img src="assets/img/icon/dollar-sign.png" alt="img"></span> -->
            </div>
        </div>


        <div class="container">
            <div class="tab-content" id="myTabContent">
                <div class="tab-pane fade show active" id="home" role="tabpanel" aria-labelledby="home-tab">
                    <div class="blog-title">
                        <h6>‚öΩÔ∏è Statistics</h6>
                        <!-- <a href="news1.html">See More</a> -->
                    </div>
                    <div class="blog-slider owl-carousel">
                        <div class="item">
                            <div class="single-blog-card">
                                <!-- <div class="card-img"><img src="assets/img/blog/1.png" alt="img"></div> -->
                                <div class="card-details">
                                    <div class="date secure"><i class="fa fa-lock"></i> Secured</div>
                                    <!-- <a class="card-title" href="blog-details.html">The Best MMA Bets of the Week</a> -->
                                    <div *ngIf="storeData.store['wallet'] as walletData"  class="blog-meta">
                                      <div class="">
                                        <span class="title">won</span>:<span class="count">{{records.true.won.count}}</span>/<small class="amount">{{walletData['init_currency']['symbol']}}{{currencyConverter(records.true.won.amount)|number:'1.1-1'}}</small>
                                      </div>
                                      <div class="">
                                        <span class="title">loss</span>:<span class="count">{{records.true.loss.count}}</span>/<small class="amount">{{walletData['init_currency']['symbol']}}{{currencyConverter(records.true.loss.amount)|number:'1.1-1'}}</small>
                                      </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="item">
                            <div class="single-blog-card">
                                <!-- <div class="card-img"><img src="assets/img/blog/2.png" alt="img"></div> -->
                                <div class="card-details">
                                    <div class="date risk"><i class="fa fa-unlock"></i> Risk</div>

                                    <div *ngIf="storeData.store['wallet'] as walletData"  class="blog-meta">
                                      <div class="">
                                        <span class="title">won</span>:<span class="count">{{records.false.won.count}}</span>/<small class="amount">{{walletData['init_currency']['symbol']}}{{currencyConverter(records.false.won.amount)|number:'1.1-1'}}</small>

                                      </div>
                                      <!-- <br> -->
                                      <div class="">
                                        <span class="title">loss</span>:<span class="count">{{records.false.loss.count}}</span>/<small class="amount">{{walletData['init_currency']['symbol']}}{{currencyConverter(records.false.loss.amount)|number:'1.1-1'}}</small>

                                      </div>
                                    </div>
                                    <!-- <div class="blog-meta">
                                        <a href="comment.html" class="comment"><i class="ri-chat-4-line"></i>27</a>
                                        <div class="like">
                                            <i class="ri-thumb-up-line"></i>
                                            50
                                        </div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>

        <div class="sports-wrap mt-4 container">



            <div class="sports-slider slider-nav">

                <div (click)="activeTab = 'running'" class="sports-slider-item">
                  <i class="fa fa-circle me-2"></i> Running

                </div>
                <div (click)="activeTab = 'won'" class="sports-slider-item">
                    Won
                </div>
                <div (click)="activeTab = 'loss'" class="sports-slider-item">
                     Loss
                </div>
                <div (click)="activeTab = 'canc'"  class="sports-slider-item">
                    Cancel
                </div>

            </div>

              <div class="date-filter container">
                <label>
                  From:
                  <input type="date" [(ngModel)]="dateFrom" />
                </label>
                <label>
                  To:
                  <input type="date" [(ngModel)]="dateTo" />
                </label>

                <button class="filter-btn" (click)="filterByDate()">Filter</button>
              </div>

              <div class="sports-slider-wrap slider-for">

                <!-- running Matches -->
                <div *ngIf="activeTab === 'running'" class="slider-content">
                    <div  id="running__matches" *ngIf="storeData.store['wallet'] as walletData" >
                      <div *ngIf="categorizeTicketData.open?.length > 0; else noData">
                        <div *ngFor="let ticket of categorizeTicketData.open" class="bet-slip-card mt-4">
                            <!-- <span>{{ticket.start_date|date}}</span> -->

                            <p>#{{ticket.ticket_id}}</p>
                            <div class="m-header flex">
                              <h6 class="title league">{{ticket.fixture[0].league.name}}</h6>
                              <span class="m-time">{{ticket.start_date|date:'medium'}}</span>
                            </div>
                            <ul class="bet-result">
                              <li>üõÑStake:<span translate="no">{{walletData['init_currency']['symbol']}}{{currencyConverter(ticket.stake_amount)|number:'1.1-1'}}</span></li>
                                  <li>‚ôªÔ∏èProfit: <span class="potential_winning {{ticket.status}}">{{walletData['init_currency']['symbol']}}{{currencyConverter(PotentialWinning(ticket.stake_amount,ticket.market_odds,ticket.status))|number:'1.1-1'}}</span></li>
                              <li>Market:<span class="m-value">{{ticket.market_value}}~<span class="m-odd">{{ticket.market_odds}}</span></span></li>
                                <!-- <li>‚ôªÔ∏èProfit: <span>{{ticket.market_odds}}</span></li> -->
                            </ul>

                            <div *ngIf="activeTicket===ticket.ticket_id" class="team-info">
                              <div *ngFor="let fixture of ticket.fixture" class="single-product-wrap">
                                  <!-- <h6 class="title">{{fixture.league.name}}</h6> -->
                                  <div class="details">
                                      <div class="thumb"><img src="{{fixture.teams.home.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.home.name}}</h6></div>
                                      <div class="betting-wrap">
                                        <h2><span class="{{parseInt(fixture.goals.home)>parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.home}}</span> : <span class="{{parseInt(fixture.goals.home)<parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.away}}</span></h2>
                                          <!-- <div class="time">
                                              <i class="fa fa-circle"></i>
                                              {{setTime(fixture.fixture.timestamp)}}
                                          </div> -->
                                          <!-- <a [routerLink]="['/betslip',fixture.fixture.id]" class="btn btn-base">Bet Now</a> -->
                                      </div>
                                      <div class="thumb"><img src="{{fixture.teams.away.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.away.name}}</h6></div>
                                  </div>
                              </div>
                            </div>

                            <span (click)="activeTicket=ticket.ticket_id" *ngIf="activeTicket!==ticket.ticket_id" class="btn btn-outline-dark btn-sm ng-tns-c880506055-0">Show Score ‚ñº</span>


                            <button  (click)="CancelTicket(ticket)" *ngIf="CanCancel(ticket);else statusBlock"><i class="fa fa-trash"></i></button>
                            <ng-template #statusBlock>
                              <button class="status">üü°</button>

                              </ng-template>

                            <!-- <div class="m-time">
                              {{ticket.start_date|date}}
                            </div> -->

                            <div *ngIf="ticket.unseen_settled" class="expected-settle-time">
                              ‚è≥ Settles in {{ ticket.start_date | countdown:true | async}}
                            </div>
                            <div class="expected-settle-time"
                                   *ngIf="(ticket.start_date | countdown:true | async) !== 'Started'">
                                ‚è≥ Starts in {{ ticket.start_date | countdown:false | async }}
                              </div>
                        </div>

                      </div>
                      <ng-template #noData>
                        <div class="empty-div">
                          No data available.
                        </div>
                      </ng-template>
                    </div>
                </div>

                  <div *ngIf="activeTab === 'won'" class="slider-content">
                    <!-- won tickets -->
                    <div  id="won__matches" *ngIf="storeData.store['wallet'] as walletData"  class="slider-content">

                      <div *ngIf="categorizeTicketData.won?.length > 0; else noData">
                        <div *ngFor="let ticket of categorizeTicketData.won" class="bet-slip-card mt-4">
                            <!-- <span>{{ticket.start_date|date}}</span> -->
                            <div class="">

                            </div>
                            <p>#{{ticket.ticket_id}}</p>
                            <div class="m-header flex">
                              <h6 class="title league">{{ticket.fixture[0].league.name}}</h6>

                              <span class="m-time">{{ticket.start_date|date:'medium'}}</span>
                            </div>
                            <ul class="bet-result">
                              <li>üõÑStake:<span translate="no">{{walletData['init_currency']['symbol']}}{{currencyConverter(ticket.stake_amount)|number:'1.1-1'}}</span></li>
                              <li>‚ôªÔ∏èProfit: <span class="potential_winning {{ticket.status}}">{{walletData['init_currency']['symbol']}}{{currencyConverter(PotentialWinning(ticket.stake_amount,ticket.market_odds,ticket.status))|number:'1.1-1'}}</span></li>
                              <li>Market:<span class="m-value">{{ticket.market_value}}~<span class="m-odd">{{ticket.market_odds}}</span></span></li>
                                <!-- <li>‚ôªÔ∏èProfit: <span>{{ticket.market_odds}}</span></li> -->
                            </ul>

                            <div *ngIf="activeTicket===ticket.ticket_id" class="team-info">
                              <div *ngFor="let fixture of ticket.fixture" class="single-product-wrap">
                                  <div class="details">
                                      <div class="thumb"><img src="{{fixture.teams.home.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.home.name}}</h6></div>
                                      <div class="betting-wrap">
                                        <h2><span class="{{parseInt(fixture.goals.home)>parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.home}}</span> : <span class="{{parseInt(fixture.goals.home)<parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.away}}</span></h2>
                                      </div>
                                      <div class="thumb"><img src="{{fixture.teams.away.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.away.name}}</h6></div>
                                  </div>
                              </div>
                            </div>

                            <span (click)="activeTicket=ticket.ticket_id" *ngIf="activeTicket!==ticket.ticket_id" class="btn btn-outline-dark btn-sm ng-tns-c880506055-0">Show Score ‚ñº</span>


                            <button> <i class="fa fa-check"></i></button>

                        </div>
                      </div>
                      <ng-template #noData>
                        <div class="empty-div">
                          No data available.
                        </div>
                      </ng-template>
                    </div>
                  </div>

                    <!-- loss tickets -->
                    <div *ngIf="activeTab === 'loss'" class="slider-content">

                      <div  id="loss__matches" *ngIf="storeData.store['wallet'] as walletData"  class="slider-content">

                        <div *ngIf="categorizeTicketData.loss?.length > 0; else noData">
                          <div *ngFor="let ticket of categorizeTicketData.loss" class="bet-slip-card mt-4">
                              <!-- <span>{{ticket.start_date|date}}</span> -->
                              <div class="">

                              </div>
                              <p>#{{ticket.ticket_id}}</p>
                              <div class="m-header flex">
                                <h6 class="title league">{{ticket.fixture[0].league.name}}</h6>

                                <span class="m-time">{{ticket.start_date|date:'medium'}}</span>
                              </div>
                              <ul class="bet-result">
                                <li>üõÑStake:<span translate="no">{{walletData['init_currency']['symbol']}}{{currencyConverter(ticket.stake_amount)|number:'1.1-1'}}</span></li>
                                <li>‚ôªÔ∏èProfit: <span class="potential_winning {{ticket.status}}">{{walletData['init_currency']['symbol']}}{{currencyConverter(PotentialWinning(ticket.stake_amount,ticket.market_odds,ticket.status))|number:'1.1-1'}}</span></li>
                                <li>Market:<span class="m-value">{{ticket.market_value}}~<span class="m-odd">{{ticket.market_odds}}</span></span></li>
                              </ul>

                              <div *ngIf="activeTicket===ticket.ticket_id" class="team-info">
                                <div *ngFor="let fixture of ticket.fixture" class="single-product-wrap">
                                    <div class="details">
                                        <div class="thumb"><img src="{{fixture.teams.home.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.home.name}}</h6></div>
                                        <div class="betting-wrap">
                                          <h2><span class="{{parseInt(fixture.goals.home)>parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.home}}</span> : <span class="{{parseInt(fixture.goals.home)<parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.away}}</span></h2>
                                        </div>
                                        <div class="thumb"><img src="{{fixture.teams.away.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.away.name}}</h6></div>
                                    </div>
                                </div>
                              </div>

                              <span (click)="activeTicket=ticket.ticket_id" *ngIf="activeTicket!==ticket.ticket_id" class="btn btn-outline-dark btn-sm ng-tns-c880506055-0">Show Score ‚ñº</span>

                              <button class="status"> üî¥</button>

                          </div>
                        </div>
                        <ng-template #noData>
                          <div class="empty-div">
                            No data available.
                          </div>
                        </ng-template>

                      </div>
                    </div>

                    <div *ngIf="activeTab === 'canc'" class="slider-content">
                      <div  id="cancel__matches" *ngIf="storeData.store['wallet'] as walletData"  class="slider-content">

                        <div *ngIf="categorizeTicketData.postponed?.length > 0; else noData">
                          <div *ngFor="let ticket of categorizeTicketData.postponed" class="bet-slip-card mt-4">

                              <p>#{{ticket.ticket_id}}</p>
                              <div class="m-header flex">
                                <h6 class="title league">{{ticket.fixture[0].league.name}}</h6>

                                <span class="m-time">{{ticket.start_date|date:'medium'}}</span>
                              </div>
                              <ul class="bet-result">
                                <li>üõÑStake:<span translate="no">{{walletData['init_currency']['symbol']}}{{currencyConverter(ticket.stake_amount)|number:'1.1-1'}}</span></li>
                                <li>‚ôªÔ∏èProfit: <span class="potential_winning {{ticket.status}}">{{walletData['init_currency']['symbol']}}{{currencyConverter(PotentialWinning(ticket.stake_amount,ticket.market_odds,ticket.status))|number:'1.1-1'}}</span></li>
                                <li>Market:<span class="m-value">{{ticket.market_value}}~<span class="m-odd">{{ticket.market_odds}}</span></span></li>
                              </ul>

                              <div *ngIf="activeTicket===ticket.ticket_id" class="team-info">
                                <div *ngFor="let fixture of ticket.fixture" class="single-product-wrap">
                                    <div class="details">
                                        <div class="thumb"><img src="{{fixture.teams.home.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.home.name}}</h6></div>
                                        <div class="betting-wrap">
                                          <h2><span class="{{parseInt(fixture.goals.home)>parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.home}}</span> : <span class="{{parseInt(fixture.goals.home)<parseInt(fixture.goals.away)?'team-won':''}}">{{fixture.goals.away}}</span></h2>
                                        </div>
                                        <div class="thumb"><img src="{{fixture.teams.away.logo}}" alt="img"><h6 class="team-name">{{fixture.teams.away.name}}</h6></div>
                                    </div>
                                </div>
                              </div>

                              <span (click)="activeTicket=ticket.ticket_id" *ngIf="activeTicket!==ticket.ticket_id" class="btn btn-outline-dark btn-sm ng-tns-c880506055-0">Show Score ‚ñº</span>

                              <button class="status">‚ö´Ô∏è</button>

                          </div>
                        </div>
                        <ng-template #noData>
                          <div class="empty-div">
                            No data available.
                          </div>
                        </ng-template>

                      </div>
                    </div>

            </div>
        </div>
        <!-- bottom menu -->
        <div class="main-footer-bottom d-block text-center">
            <ul>
                <li>
                    <a [routerLink]="['/main']" [class.active]="current === 'main'">
                        <img src="assets/img/icon/svg/home.svg" alt="icon">
                        Home
                    </a>
                </li>
                <!-- <li>
                    <a href="sports.html">
                        <img src="assets/img/icon/svg/sports.svg" alt="img">
                        Sports
                    </a>
                </li> -->
                <li>
                    <a [class.active]="current === 'ticket'" class="menu-bar" [routerLink]="['/tickets']">
                        <img src="assets/img/icon/svg/ticket.svg" alt="img">
                        Tickets
                    </a>
                </li>
                <li>
                    <a [routerLink]="['/promotions']" [class.active]="current === 'promotions'">
                        <img src="assets/img/icon/svg/document.svg" alt="img">
                        <!-- <svg class="svg-inline--fa fa-users fa-w-20" aria-hidden="true" focusable="false" data-prefix="fa" data-icon="users" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" data-fa-i2svg=""><path fill="currentColor" d="M96 224c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm448 0c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zm32 32h-64c-17.6 0-33.5 7.1-45.1 18.6 40.3 22.1 68.9 62 75.1 109.4h66c17.7 0 32-14.3 32-32v-32c0-35.3-28.7-64-64-64zm-256 0c61.9 0 112-50.1 112-112S381.9 32 320 32 208 82.1 208 144s50.1 112 112 112zm76.8 32h-8.3c-20.8 10-43.9 16-68.5 16s-47.6-6-68.5-16h-8.3C179.6 288 128 339.6 128 403.2V432c0 26.5 21.5 48 48 48h288c26.5 0 48-21.5 48-48v-28.8c0-63.6-51.6-115.2-115.2-115.2zm-223.7-13.4C161.5 263.1 145.6 256 128 256H64c-35.3 0-64 28.7-64 64v32c0 17.7 14.3 32 32 32h65.9c6.3-47.4 34.9-87.3 75.2-109.4z"></path></svg> -->
                        Promotion
                    </a>
                </li>
                <li>
                    <a [routerLink]="['/profile']" [class.active]="current === 'profile'">
                        <img src="assets/img/icon/svg/profile.svg" alt="img">
                        Me
                    </a>
                </li>
            </ul>
        </div>
</div>
